<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body>
    <h2><%= title %></h2>
    <form method="post" action="/users/register" enctype="multipart/form-data" name="userInfo">
      <div class="mb-3">
        <label for="exampleInputEmail1" class="form-label">Email address</label>
        <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="email">
        <div id="emailHelp" class="form-text">We'll never share your email with anyone else.</div>
      </div>
      <div class="mb-3">
        <label for="exampleInputPassword1" class="form-label">Password</label>
        <input type="password" class="form-control" id="exampleInputPassword1" name="pwd">
      </div>
      <div class="mb-3 form-check">
        <input type="checkbox" class="form-check-input" id="exampleCheck1">
        <label class="form-check-label" for="exampleCheck1">Check me out</label>
      </div>
      <button type="submit" class="btn btn-primary" id="button1">Submit</button>

<div id="div1"></div>
      
    </form>
    <script>
       const btnSubmt = document.querySelector('#button1');
       const divMessage = document.querySelector('#div1');
       btnSubmt.addEventListener('click',(evt)=>{
         evt.preventDefault(); //取消原有的行為
  
         const xhr = new XMLHttpRequest();

          xhr.addEventListener('load',()=>{
            const data = xhr.responseText;
            divMessage.textContent = data;
          })

         //把表單中使用者輸入的資料放到FormData物件中
         const formData =  new FormData(document.userInfo);

         xhr.open("POST", document.userInfo.action);
         xhr.send(formData)

        // console.log('submit')
       })
    </script>
  </body>
</html>
